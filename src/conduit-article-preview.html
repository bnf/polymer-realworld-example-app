<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="conduit-common-styles.html">

<dom-module id="conduit-article-preview">
  <template>
    <style include="conduit-common-styles">
      .article-preview-show-false {
        visibility: hidden;
      }
    </style>

    <paper-progress indeterminate hidden$="[[visible]]"></paper-progress>
    <div class$="article-preview article-preview-show-[[visible]]">
      <div class="article-meta">
        <a href="/#/profile/[[article.author.username]]"><img src="[[article.author.image]]"/></a>
        <div class="info">
          <a href="/#/profile/[[article.author.username]]" class="author">[[article.author.username]]</a>
          <span class="date">[[article.createdAt]]</span>
        </div>
        <template is="dom-if" if="[[article.favorited]]">
          <button class="btn btn-primary btn-sm pull-xs-right">
            <i class="ion-heart"></i> [[article.favoritesCount]]
          </button>
        </template>
        <template is="dom-if" if="[[!article.favorited]]">
          <button class="btn btn-outline-primary btn-sm pull-xs-right">
            <i class="ion-heart"></i> [[article.favoritesCount]]
          </button>
        </template>
      </div>
      <a href="/#/article/[[article.slug]]" class="preview-link">
        <h1>[[article.title]]</h1>
        <p>[[article.description]]</p>
        <ul class="tag-list">
          <template is="dom-repeat" items="[[article.tagList]]">
            <li class="tag-pill tag-default tag-outline">[[item]]</a>
          </template>
        </ul>
        <span>Read more...</span>
      </a>
    </div>
  </template>

  <script>
    class ConduitArticlePreview extends Polymer.Element {
      static get is() {
        return 'conduit-article-preview';
      }

      static get properties() {
        return {
          article: {
            type: Object
          },
          visible: {
            type: Boolean,
            value: true
          },
        }
      }
    }

    window.customElements.define(ConduitArticlePreview.is, ConduitArticlePreview);
  </script>
</dom-module>
